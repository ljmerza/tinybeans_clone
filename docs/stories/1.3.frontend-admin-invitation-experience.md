# Story 1.3: Frontend Admin Invitation Experience

## Status
- Draft

## Story
**As a** circle admin using the web app,  
**I want** an intuitive invite UI with status tracking,  
**so that** I can manage invitations without leaving the circles dashboard.

## Acceptance Criteria
1. Invite modal/panel allows searching by username/email, displaying existence state and validation errors.  
2. Pending invitation list surfaces statuses (pending, accepted, declined, expired) with resend/cancel controls.  
3. UI leverages shared components (Button, Input, Badge, Toast) in line with design tokens.  
4. Error handling provides actionable messages without exposing backend details.

## Tasks / Subtasks
- [ ] Implement invite creation modal/panel using shared components (AC 1, AC 3)  
  - [ ] Add username/email search integration with new backend endpoints and optimistic UX (AC 1)  
- [ ] Build pending invitations list UI with status badges and resend/cancel actions (AC 2)  
- [ ] Hook TanStack Query mutations/queries for invite create, list, resend, cancel (AC 2)  
- [ ] Ensure toast/error handling aligns with existing patterns (`web/src/components/toast`) (AC 3, AC 4)  
- [ ] Add Vitest/React Testing Library coverage for success/error paths and loading states (All ACs)

## Dev Notes
- Frontend resides in `web/`; circles feature modules live under `web/src/features/circles`.  
- Shared UI primitives (Button, Input, Badge, Dialog) are in `web/src/components`; adhere to tokens defined in `web/components.json` (to be refreshed in new docs).  
- Use TanStack Query for server interactions; maintain caching keys consistent with existing membership queries.  
- Invite status API responses should reflect backend schema updates (pending/accepted/etc.); map them to badges and user messaging.  
- Keep the admin experience within current routes (`web/src/routes` & `route-views`), respecting navigation patterns.  
- Feature flag or gracefully degrade UI if backend capability is absent (for deploy staging).

### Testing
- Use Vitest + React Testing Library; locate tests alongside components (e.g., `*.test.tsx`).  
- Mock TanStack Query hooks and API clients to simulate success/error states.  
- Add Cypress/E2E notes if relevant once broader test strategy lands, but prioritize unit/integration tests per docs.  
- Run `npm run test` and ensure `npm run lint`/`npm run format` remain clean.

## Change Log
| Date | Version | Description | Author |
| --- | --- | --- | --- |
| 2025-02-14 | 0.1 | Initial draft | BMad Master |

## Dev Agent Record
*(To be completed by development agent.)*

## QA Results
*(To be completed by QA agent.)*
